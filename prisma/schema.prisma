generator client {
  provider        = "prisma-client-js"
  output          = "../src/generated/prisma"
  previewFeatures = ["nativeDistinct", "relationJoins"]
  engineType      = "client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["fussballverein"]
}

model Fussballverein {
  id               Int        @id @default(autoincrement())
  name             String
  gruendungsdatum  DateTime?  @db.Date
  website          String?
  email            String?
  telefonnummer    String?
  mitgliederanzahl Int?
  version          Int        @default(0)
  erzeugt          DateTime   @default(now()) @db.Timestamp(6)
  aktualisiert     DateTime   @default(now()) @updatedAt @db.Timestamp(6)
  logoFile         LogoFile?
  spieler          Spieler[]
  stadion          Stadion?

  @@map("fussballverein")
  @@schema("fussballverein")
}

model Spieler {
  id               Int            @id @default(autoincrement())
  vorname          String
  nachname         String
  alter            Int?
  starkerFuss      String?        @map("starker_fuss")
  fussballvereinId Int            @map("fussballverein_id")
  fussballverein   Fussballverein @relation(fields: [fussballvereinId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballvereinId])
  @@map("spieler")
  @@schema("fussballverein")
}

model Stadion {
  id               Int            @id @default(autoincrement())
  stadt            String
  strasse          String?
  hausnummer       String?
  kapazitaet       Int
  fussballvereinId Int            @unique @map("fussballverein_id")
  fussballverein   Fussballverein @relation(fields: [fussballvereinId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballvereinId])
  @@map("stadion")
  @@schema("fussballverein")
}

model LogoFile {
  id               Int            @id @default(autoincrement())
  data             Bytes
  filename         String
  mimetype         String?
  fussballvereinId Int            @unique @map("fussballverein_id")
  fussballverein   Fussballverein @relation(fields: [fussballvereinId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fussballvereinId])
  @@map("logo_file")
  @@schema("fussballverein")
}
